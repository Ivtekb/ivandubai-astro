---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProjectPreview from '../../../components/ProjectPreview.astro';
import Pagination from '../../../components/Pagination.astro';

// Dynamic routing for English projects
export async function getStaticPaths({ paginate }) {
  // Filter English projects only (from en/ subfolder)
  const projects = (await getCollection('projects', ({ id }) => {
    return id.startsWith('en/');
  })).sort((a, b) =>
    new Date(b.data.publishDate) - new Date(a.data.publishDate)
  );
  return paginate(projects, { pageSize: 8 });
}

const { page } = Astro.props;
const portfolio = page.data;
---

<BaseLayout
  title="Your UAE Real Estate Scenario — Unique Choice"
  description="You are the main character of your story. My task is to reveal life and investment scenarios where the route matches your expectations. Tell me what matters, and together we'll find the perfect match for life or business in Dubai, Abu Dhabi, Ras Al Khaimah."
  showHeader={false}
>
  <div class="max-w-3xl mx-auto px-4 py-12 sm:py-16">
    <!-- MAIN H1 HEADING - largest -->
    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-serif font-semibold mb-6 leading-tight">
      Your UAE Real Estate Scenario — Unique Choice
    </h1>
    <p class="text-base font-normal mb-2">
      You are the main character of your story. My task is to reveal life and investment scenarios where the route matches your expectations.<br>
      Tell me what matters, and together we'll find the perfect match for life or business in Dubai, Abu Dhabi, Ras Al Khaimah.
    </p>
    <p class="mb-4 text-base font-serif italic text-center">
      Two words about rhythm and goals — get options that match your lifestyle
    </p>
   <div class="flex justify-center mb-10">
  <a
    href="/en/selection"
    class="px-8 py-3 rounded-full border border-black font-serif italic text-lg hover:bg-black hover:text-white transition-colors no-underline inline-block"
    style="color: inherit;"
  >
    Fill Form
  </a>
</div>

    <hr class="my-10 border-dashed border-black" />

    <!-- H2 SUBTITLE - larger than card titles -->
    <h2 style="font-size: 1.5rem; font-family: ui-serif, Georgia, Cambria, serif; font-weight: 600; margin-bottom: 2rem; line-height: 1.2;" class="sm:text-3xl">
      Choose Your District and Scenario
    </h2>
    <div class="mb-8">
      {portfolio.map((project) => (
        <ProjectPreview project={project} class="mb-10 sm:mb-12" />
      ))}
      <Pagination page={page} class="my-10" />
    </div>

    <hr class="my-10 border-dashed border-black" />

    <!-- H3 BOTTOM HEADINGS - smaller than card titles -->
    <h3 style="font-size: 1.125rem; font-family: ui-serif, Georgia, Cambria, serif; font-weight: 600; margin-bottom: 1rem; line-height: 1.2;" class="sm:text-xl">Live Insights and Stories</h3>
    <p class="mb-8 text-base">
      In each scenario — real cases and responses: new habits are born here, unexpected routes open up, solutions come that save years of searching and resources when choosing real estate in the UAE.
    </p>

    <div class="mb-10">
      <h3 style="font-size: 1.125rem; font-family: ui-serif, Georgia, Cambria, serif; font-weight: 600; margin-bottom: 0.75rem; line-height: 1.2;" class="sm:text-xl">Question for You</h3>
      <p class="mb-4 text-base">Feel the impulse for change? Set up your scenario, manage your choice — the route is always open for a new hero.</p>
      <div class="flex justify-center">
        <a 
          href="https://forms.gle/your-google-form-link"
          target="_blank"
          class="px-8 py-3 rounded-full border border-black font-serif italic text-lg hover:bg-black hover:text-white transition-colors no-underline"
          style="color: inherit;"
        >
          Submit Request
        </a>
      </div>
    </div>

    <hr class="my-10 border-dashed border-black" />

    <h3 style="font-size: 1.125rem; font-family: ui-serif, Georgia, Cambria, serif; font-weight: 600; margin-bottom: 0.75rem; line-height: 1.2;" class="sm:text-xl">Answers to Questions and Market Insights</h3>
    <p class="text-base">
      Current solutions, fresh cases, honest view of deals — <a href="/en/blog" class="underline font-normal !text-black hover:!text-black">in the Blog</a>.
    </p>
  </div>
</BaseLayout>