---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostPreview from '../../components/PostPreview.astro';
import Pagination from '../../components/Pagination.astro';

export async function getStaticPaths({ paginate }) {
  const blogPosts = (await getCollection('blog')).sort((a, b) =>
    new Date(b.data.publishDate) - new Date(a.data.publishDate)
  );
  return paginate(blogPosts, { pageSize: 8 });
}

const { page } = Astro.props;
const blogPosts = page.data;
---

<BaseLayout
  title="–ñ–∏–≤–æ–π –æ—Ç–∫–ª–∏–∫ ‚Äî –∏–Ω—Å–∞–π—Ç—ã —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –î—É–±–∞–µ"
  description="–ò–º–ø—É–ª—å—Å—ã —Ä—ã–Ω–∫–∞, —Ä–∞–∑–±–æ—Ä—ã –∫–µ–π—Å–æ–≤ –∏ AI-–Ω–∞–±–ª—é–¥–µ–Ω–∏—è ‚Äî –≤—Å—ë, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª–æ–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∏—Ç–º –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –î—É–±–∞—è."
  showHeader={false}
>
  <div class="max-w-3xl mx-auto px-4 py-12 sm:py-16">
    <!-- –û–°–ù–û–í–ù–û–ô H1 –ó–ê–ì–û–õ–û–í–û–ö -->
    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-serif font-semibold mb-6 leading-tight">
      –ñ–∏–≤–æ–π –æ—Ç–∫–ª–∏–∫
    </h1>
    
    <p class="text-base font-normal mb-8">
      –ó–¥–µ—Å—å —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏–º–ø—É–ª—å—Å—ã —Ä—ã–Ω–∫–∞, —Ä–∞–∑–±–æ—Ä—ã –∫–µ–π—Å–æ–≤ –∏ –≤—Å–ø–ª–µ—Å–∫–∏ –∏–¥–µ–π ‚Äî –≤—Å—ë, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª–æ–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∏—Ç–º –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –î—É–±–∞—è. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–æ–µ –ø–æ–ª–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞: AI-–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä, –≤–æ–ø—Ä–æ—Å —á–∏—Ç–∞—Ç–µ–ª—é. –û—Ç–∫—Ä—ã–≤–∞–π –ª—é–±—É—é —Ç–æ—á–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—è–π, –∫–∞–∫ –∑–≤—É—á–∏—Ç –≤–Ω—É—Ç—Ä–∏.
    </p>

    <hr class="my-10 border-dashed border-black" />

    <!-- –°–ü–ò–°–û–ö –ü–û–°–¢–û–í -->
    <div class="mb-8">
      {blogPosts.map((post) => (
        <PostPreview post={post} class="mb-10 sm:mb-12" />
      ))}
      <Pagination page={page} class="my-10" />
    </div>

    <hr class="my-10 border-dashed border-black" />

    <!-- –ü–û–î–ü–ò–°–ö–ê –ù–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø -->
    <div class="border border-dashed border-black p-8 text-center">
      <h2 class="text-xl font-serif font-semibold mb-4">
        –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
      </h2>
      <p class="mb-6 text-base">
        –ü–æ–ª—É—á–∞–π —Å–≤–µ–∂–∏–µ –∫–µ–π—Å—ã –∏ –∏–Ω—Å–∞–π—Ç—ã –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –û–ê–≠ ‚Äî 1 –ø–∏—Å—å–º–æ –≤ –Ω–µ–¥–µ–ª—é.
      </p>
      
      <form action="https://formspree.io/f/movlvnnr" method="POST" class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <input 
          type="email" 
          name="email"
          placeholder="–¢–≤–æ–π email" 
          class="px-4 py-2 border border-black rounded-full font-serif w-full sm:w-auto"
          required
        />
        <input type="hidden" name="_subject" value="üìß –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –±–ª–æ–≥ ivandubai.xyz" />
        <button 
          type="submit"
          class="px-8 py-2 rounded-full border border-black font-serif italic hover:bg-black hover:text-white transition-colors"
        >
          –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
        </button>
      </form>
    </div>
  </div>
</BaseLayout>